<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collectibles Game</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ammo.js@3.0.0/builds/ammo.wasm.js"></script>
</head>
<body>
    <a-scene physics="debug: true; gravity: -9.8;" vr-mode-ui="enabled: true">
        <!-- Освещение -->
        <a-entity light="type: ambient; color: #BBB;"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 0.5" position="-1 1 0"></a-entity>

        <!-- Пол -->
        <a-plane 
            position="0 0 0" 
            rotation="-90 0 0" 
            width="30" 
            height="30" 
            static-body 
            material="color: #7BC8A4">
        </a-plane>

        <!-- Игрок -->
        <a-entity id="player" position="0 1.6 0">
            <a-camera></a-camera>
            <a-entity 
                position="0 0 -2" 
                geometry="primitive: sphere; radius: 0.2" 
                material="color: #00FF00" 
                dynamic-body="shape: sphere; mass: 1">
            </a-entity>
        </a-entity>
    </a-scene>

    <script>
        // Генерация позиций для коллекционных объектов
        function spawnObjects() {
            const positions = [];
            for (let i = 0; i < 10; i++) {
                positions.push({
                    x: Math.random() * 10 - 5,
                    y: 1,
                    z: Math.random() * 10 - 5
                });
            }
            return positions;
        }

        // Создание коллекционных объектов
        function createCollectibles() {
            const positions = spawnObjects();
            
            positions.forEach(pos => {
                const entity = document.createElement('a-entity');
                entity.setAttribute('position', pos);
                entity.setAttribute('class', 'collectible');
                entity.setAttribute('geometry', 'primitive: tetrahedron; radius: 0.5'); // Треугольная пирамида
                entity.setAttribute('material', 'color: #FF0000; metalness: 0.3; roughness: 0.4');
                entity.setAttribute('dynamic-body', 'shape: box; mass: 0.5;');

                // Обработчик столкновений
                entity.addEventListener('collide', function(e) {
                    if (e.detail.body.el.id === 'player') {
                        entity.remove();
                        console.log('Item collected!');
                    }
                });

                document.querySelector('a-scene').appendChild(entity);
            });
        }

        // Инициализация игры
        document.querySelector('a-scene').addEventListener('loaded', function() {
            createCollectibles();
        });
    </script>
</body>
</html>
